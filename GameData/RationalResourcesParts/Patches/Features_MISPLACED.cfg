+RESOURCE_DEFINITION[IntakeAir]
{
	@name = RamPower
	@displayName = Ram Power
	@abbreviation = RamP
	@flowMode = NO_FLOW
	@transfer = NONE
}

@PART[RRScoopAtm*]:NEEDS[RationalResources]
{
	+MODULE[ModuleResourceIntake],0
	{
		@resourceName = RamPower
		@checkForOxygen = false
		@intakeSpeed = 5
		machCurve
		{
			key = 0 0 0 0
			key = 0.6 0.5 0.75 0.75
			key = 2 1 0 0
			key = 4 1 0 0
			key = 9 0 0 0
		}
	}
	RESOURCE
	{
		name = RamPower
		amount = 1
		maxAmount = 1
		@amount *= #$/RRPower$
		@maxAmount *= #$/RRPower$
	}
	
	MODULE
	{
		name = ModuleResourceHarvester
		HarvesterType = 2
		Efficiency = #$/RRPower$
		airSpeedStatic = 5000
		ResourceName = LqdAmmonia
		ConverterName = LqdAmmonia Filter (Atmo)
		StartActionName = Start LqdAmmonia Filter (Atmo)
		StopActionName = Stop LqdAmmonia Filter (Atmo)
		ToggleActionName = Toggle LqdAmmonia Filter (Atmo)
		Tag = RR
	 	INPUT_RESOURCE
	 	{
			ResourceName = RamPower
			Ratio = 0.4
			@Ratio *= #$/RRPower$
	 	}
	}
	+MODULE[ModuleResourceHarvester],0
	{
		@ResourceName = ArgonGas
		@ConverterName = ArgonGas Filter (Atmo)
		@StartActionName = Start ArgonGas Filter (Atmo)
		@StopActionName = Stop ArgonGas Filter (Atmo)
		@ToggleActionName = Toggle ArgonGas Filter (Atmo)
	}
	+MODULE[ModuleResourceHarvester],0
	{
		@ResourceName = LqdCO2
		@ConverterName = LqdCO2 Filter (Atmo)
		@StartActionName = Start LqdCO2 Filter (Atmo)
		@StopActionName = Stop LqdCO2 Filter (Atmo)
		@ToggleActionName = Toggle LqdCO2 Filter (Atmo)
	}
	+MODULE[ModuleResourceHarvester],0
	{
		@ResourceName = LqdHydrogen
		@ConverterName = LqdHydrogen Filter (Atmo)
		@StartActionName = Start LqdHydrogen Filter (Atmo)
		@StopActionName = Stop LqdHydrogen Filter (Atmo)
		@ToggleActionName = Toggle LqdHydrogen Filter (Atmo)
	}
	+MODULE[ModuleResourceHarvester],0
	{
		@ResourceName = LqdDeuterium
		@ConverterName = LqdDeuterium Filter (Atmo)
		@StartActionName = Start LqdDeuterium Filter (Atmo)
		@StopActionName = Stop LqdDeuterium Filter (Atmo)
		@ToggleActionName = Toggle LqdDeuterium Filter (Atmo)
	}
	+MODULE[ModuleResourceHarvester],0
	{
		@ResourceName = LqdMethane
		@ConverterName = LqdMethane Filter (Atmo)
		@StartActionName = Start LqdMethane Filter (Atmo)
		@StopActionName = Stop LqdMethane Filter (Atmo)
		@ToggleActionName = Toggle LqdMethane Filter (Atmo)
	}
	+MODULE[ModuleResourceHarvester],0
	{
		@ResourceName = LqdNitrogen
		@ConverterName = LqdNitrogen Filter (Atmo)
		@StartActionName = Start LqdNitrogen Filter (Atmo)
		@StopActionName = Stop LqdNitrogen Filter (Atmo)
		@ToggleActionName = Toggle LqdNitrogen Filter (Atmo)
	}
	+MODULE[ModuleResourceHarvester],0
	{
		@ResourceName = LqdOxygen
		@ConverterName = LqdOxygen Filter (Atmo)
		@StartActionName = Start LqdOxygen Filter (Atmo)
		@StopActionName = Stop LqdOxygen Filter (Atmo)
		@ToggleActionName = Toggle LqdOxygen Filter (Atmo)
	}
	+MODULE[ModuleResourceHarvester],0
	{
		@ResourceName = Water
		@ConverterName = Water Filter (Atmo)
		@StartActionName = Start Water Filter (Atmo)
		@StopActionName = Stop Water Filter (Atmo)
		@ToggleActionName = Toggle Water Filter (Atmo)
	}
	+MODULE[ModuleResourceHarvester],0
	{
		@ConverterName = XenonGas Filter (Atmo)
		@StartActionName = Start XenonGas Filter (Atmo)
		@StopActionName = Stop XenonGas Filter (Atmo)
		@ToggleActionName = Toggle XenonGas Filter (Atmo)
	}
}

// @PART[RRScoopAtm*]:NEEDS[Pathfinder]
// {
	// MODULE
	// {
		// name = WBIModuleResourceHarvester
		// ConverterName = Ammonia Filter
		// harvestTypes = Atmospheric
		// Efficiency = 50
		// @Efficiency *= #$/RRPower$
		// ResourceName = Ammonia
		// StartActionName = Start Ram Filter
		// StopActionName = Stop Ram Filter
		// ToggleActionName = Toggle Ram Filter
		// IsActivated = True
		// area = #$/MODULE[ModuleResourceIntake]/area$
		// airSpeedStatic = 500
		// intakeSpeed = 0
		// intakeTransformName = intakeTransform
		// DefaultShutoffTemp = 0.8
		// machCurve
		// {
			// key = 0.05 0.001 0 0
			// key = 0.7 0.8
			// key = 1.4 1 0 0
			// key = 3.4 1 0 0
			// key = 9 0.3 0 0
		// }
		// INPUT_RESOURCE
		// {
			// ResourceName = ElectricCharge
			// Ratio = 0
		// }
	// }
// }